#include <stdint.h>
#include "xprintf.h"

#include "kiss_fft.h"
#include "kiss_fftr.h"
#include "kissfft_test.h"


extern uint32_t g_sys_tick;
static uint32_t get_tm(void){
	return g_sys_tick;
}


static const float s_real_fft_in[512] = {0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,-390.777985,547.959595,-827.293701,-299.792084,1701.386841,-2937.454590,1363.552368,-237.477417,-804.603760,-703.090454,842.395630,-250.716324,-1770.551880,1967.580811,-853.539062,-148.352905,-140.554321,1019.668579,-629.863647,25.729309,1073.981079,-868.632263,1941.178711,-1285.423706,417.543488,1161.299316,-119.069534,-617.002747,-100.782150,2478.742676,-2092.219238,151.948807,1431.227905,-891.588867,-719.396606,230.160370,349.203522,-1193.859619,115.511108,-182.911133,-481.318939,-37.573471,-432.928925,-721.137695,163.855194,-49.678925,-829.075989,496.407471,368.913086,-675.688965,597.961182,672.190552,-763.459534,922.565491,-145.052368,698.593140,-167.100159,546.821899,384.096405,-948.066284,2088.278809,-1293.623779,645.748901,271.497284,-507.692474,655.047852,-629.918640,823.551270,-1479.324951,889.109070,-533.426147,-873.642029,713.980591,-921.630066,-347.832764,-200.929321,373.793091,-817.972839,268.564941,248.746582,-589.676819,364.883087,408.185364,-273.937927,-199.030975,1415.339355,-649.205139,501.263916,289.248657,390.359711,17.921356,159.344254,549.501221,-463.984070,1169.636597,-1171.117188,993.199341,-24.305786,-357.963287,-525.442627,27.091980,798.769653,-2328.151611,1701.965210,-1380.902588,-82.771027,-340.122040,-205.365479,122.904022,-1740.801025,2039.189819,-2182.531250,1078.997314,154.451508,-335.890930,90.436035,261.379486,1430.560547,-2285.143555,2465.704590,-634.773560,542.873901,-305.126587,424.517639,1219.029907,-1588.009033,1930.292236,-1236.589600,1728.027222,-1591.841553,231.156433,1525.363159,-1948.219849,853.839355,-1172.641357,1470.080200,-2147.910645,337.016846,725.069458,-2007.614868,953.801697,-753.218384,529.130371,-871.824951,465.415344,-143.505173,173.220337,140.570679,-494.162476,959.089417,161.376801,-86.900177,-615.925232,2498.043457,-1448.354614,-248.843628,1931.283813,-491.087463,-225.140091,-308.698944,2403.310059,-2373.025879,665.530029,664.573975,-697.998108,-277.720367,-204.174255,718.218018,-2013.042725,1421.090332,-1714.074829,570.603516,-673.248596,-331.451965,133.959473,-1120.321289,1774.590210,-2308.120605,1587.704834,-504.811737,339.723572,-20.138351,89.936829,938.261353,-875.366211,1569.133179,-1023.977661,1069.401001,-236.143494,885.031982,-795.535645,828.698120,720.410645,-1278.976074,1338.367676,-759.009705,904.670166,-1593.844849,1096.760742,-359.006958,-1155.255737,903.125977,-1081.974731,196.753510,-865.933228,876.896362,-1312.834839,432.217651,-314.951294,-116.411499,359.729370,-788.077759,1116.549072,-1098.747559,1851.288696,-1726.058838,1253.828125,636.179199,-1092.107422,1255.302246,-648.343628,2294.362305,-2699.202881,2042.388306,451.019562,-1113.705566,755.761108,-698.078613,1797.407959,-3109.178467,2469.178467,-1061.714600,-514.311157,44.946167,-875.954712,1155.747070,-2829.812012,2366.392090,-2267.652344,725.321899,-262.558044,-519.932007,856.106934,-1490.392090,1822.428467,-1758.921387,1897.499512,-1055.316284,665.618774,616.582703,-398.524475,1022.055542,-1139.918579,2597.762939,-2090.429199,1143.857422};
static float s_real_ifft_in[512] = {0.268578,2.473217,-1.689119,2.807434,1.786130,-2.713301,0.552398,3.538327,-1.924721,-3.078328,-0.736281,2.017381,-1.411990,-2.014702,-0.157941,20.612274,20.609079,2.014874,2.865084,3.617494,0.181368,4.041493,2.593906,3.565764,-0.373845,-0.372554,7.561232,-1.757037,-13.250267,37.157108,36.471951,26.535427,73.694397,3.459303,-14.975559,-7.217784,2.470677,5.807644,-6.275123,-5.105938,-7.454447,-4.569776,-15.746566,-22.578493,6.205317,36.375927,87.770935,-53.282597,27.513994,3.404842,18.908026,9.845394,-9.449674,0.481365,-27.297096,-39.557327,16.981863,22.425911,19.468597,-35.288307,-16.214823,71.859901,-42.006004,37.214909,35.033184,23.389154,5.039161,2.425131,-3.809359,1.924104,1.726666,-0.180203,-1.570353,2.030080,5.193936,9.438416,-2.284397,4.174575,18.771021,-4.905823,4.903443,7.398359,2.529346,2.757900,-2.094576,4.725285,0.847010,2.217658,-4.623288,1.560031,2.860595,-9.742810,-2.962722,12.819504,12.139187,-7.237859,-1.829720,-11.041930,-6.658903,-4.448306,3.614636,-0.438370,2.784457,12.514326,-1.530625,6.797325,-6.401140,-21.654732,16.171423,-15.600748,-8.603715,-5.431029,1.557805,-2.324584,1.983291,0.941758,2.241863,1.015694,-0.654050,0.247835,1.911833,-0.598912,-1.768935,1.094658,-0.684242,3.376278,-11.057323,2.894201,-3.027209,-2.448673,-0.881481,-0.526618,0.468334,-2.061605,0.160994,-0.072250,1.561552,-0.466469,-0.030968,1.397745,1.059374,-4.009652,2.045532,0.635938,1.286240,-0.102296,-1.907907,-0.495990,2.088770,-0.876124,-0.148034,-0.714985,1.979055,1.110331,-0.036334,1.531203,0.911111,-0.041010,0.094721,0.779939,0.822059,-0.225505,-0.818961,0.965403,0.548805,1.055500,-0.792926,0.910339,0.131169,-0.124265,-0.498259,3.659506,0.997330,-7.239908,-4.937843,-1.248942,1.986308,0.285008,-0.705346,-0.342996,2.465738,0.211335,0.362875,0.762972,0.533740,2.725552,-3.548981,2.184751,4.517354,-1.648444,5.104517,-0.452419,-3.926853,-0.189913,-0.874524,3.484292,-2.298491,6.742141,3.949468,-8.069489,-15.826687,-2.829487,-2.040810,-18.739586,-4.475013,-4.881788,2.386659,5.712779,-9.201348,-5.078817,-5.382240,-1.562643,-5.709367,0.198946,11.341907,-15.512052,-12.719220,13.202545,-0.528363,1.717669,0.811013,-22.183571,9.085358,-4.445403,-1.165071,-2.650408,-2.630224,0.031340,3.169956,-4.846407,-7.515550,-8.605588,5.629979,5.937908,-13.223425,-1.314525,-1.660429,0.214352,5.817896,2.823327,6.244139,-0.660707,-1.075069,2.878035,-1.125860,3.172709,7.641608,-0.976162,-1.416326,-0.573672,-1.105885,-6.369019,-3.155276,1.086311,-1.511757,-4.340237,-0.128737,-0.194807,4.276365,0.931189,6.329992,2.436629,-2.637561,-4.384158,-0.832009,-8.319425,22.778460,3.812262,6.305042,6.906550,-3.906762,-3.196076,-5.552260,0.856570,-1.104797,-20.305687,-2.575052,28.165995,-9.254180,10.003679,-11.366758,-30.706999,60.094852,7.760766,33.407913,-7.797498,4.246439,-42.581219,2.182643,26.942808,-35.037407,-88.220108,-23.682495,34.223118,-36.935959,21.026693,-4.139526,55.823845,-2.297294,69.515594,-3.458427,19.322802,8.338438,15.068392,-22.759317,-43.436813,25.926722,1.099615,-7.609479,55.045620,-10.476087,4.136220,-3.255144,-150.746216,75.380013,105.578880,95.056206,-21.021690,9.227036,-16.747705,24.611984,-13.174593,-24.764740,20.013142,-32.996647,-26.070934,24.049780,72.100220,66.927589,-3.400867,-49.576893,37.270271,-27.826836,11.198355,-1.862153,-12.489082,0.130190,-3.558944,13.745271,-0.503553,10.127036,6.499996,3.157965,9.246368,2.729124,11.839897,2.143813,-11.075814,-4.064627,-32.535149,4.168338,0.077643,4.535628,1.275048,-4.299084,-0.275046,-2.412006,23.726511,-1.305481,7.611335,3.307396,-7.190262,8.645703,0.601028,2.731194,1.040388,-3.608795,-15.566132,-13.079562,8.521802,-8.879478,0.247665,-5.031596,5.314166,-2.317872,1.786511,-3.986808,3.951968,0.653141,-1.481949,10.303474,0.971684,11.346522,0.542233,-8.683040,-2.012648,2.560685,-6.730341,25.245234,-2.707043,-14.004740,-11.182112,9.850588,-26.456717,26.295254,-38.839230,8.181820,35.529099,55.767876,29.522606,-0.050024,13.898000,-9.560856,-4.097112,67.233513,-28.816412,35.995293,-37.917660,3.451139,4.472195,51.841930,-18.134594,-1.930510,14.110160,25.501032,27.560001,-41.738991,11.572245,-2.339969,32.138584,48.469490,-16.603493,39.070049,20.713646,-13.565480,-36.181236,13.215020,11.401484,32.393261,11.761644,-1.560109,-71.406075,45.501011,102.785988,63.716545,-33.634163,25.910595,-29.745178,-62.453144,-65.642525,-70.431252,146.041687,67.739868,-37.488338,133.920547,13.198013,59.775642,123.404213,-6.515670,104.155304,-54.224083,-3.835701,65.925026,20.558189,-17.704325,25.014225,4.905508,-35.940235,-71.120293,-33.130505,-6.535529,-46.554924,6.648753,-42.724560,14.798843,0.181144,-32.776802,4.819740,10.026272,6.321090,-1.139190,0.090843,3.461586,-8.667183,-12.137998,-4.350093,7.595867,12.311845,-2.710620,5.777418,-0.468002,7.046360,-3.595846,0.854070,0.651863,3.829904,1.125530,-6.887909,2.558294,10.337306,-6.492189,-4.666193,5.385230,2.397094,8.340953,12.797986,4.962908,0.170985,1.361315,-2.178652,4.218286,4.418816,20.798763,3.961766,-10.665516,-0.321568,4.982335,8.837588,-11.071906,-3.104836,2.970877,23.962286};

//static float s_real_fft_out[512] = {-0.821172,3.983185,0.274327,-1.725611,-0.704611,4.567618,-0.899198,-1.370726,-0.798818,4.832832,-1.730978,-0.736443,-0.819233,3.798875,-3.138242,3.169636,-4.660429,8.804737,2.146361,-1.737591,-2.816618,10.258324,-0.572557,-2.292700,-4.080986,15.119953,-2.819602,-3.536354,-11.211770,56.383671,-12.992019,15.381144,66.411613,-29.306087,7.250101,2.533564,8.482789,-10.663586,4.181240,0.625240,4.836741,-6.263015,2.987001,0.016014,3.773727,-4.905441,2.996400,-1.909019,2.565162,-3.708690,0.695005,-1.129634,1.926349,-2.572813,0.117498,-0.653352,2.516364,-3.198082,0.140656,-1.767227,2.270638,-5.311087,-3.910385,5.311899,-2.640911,-0.088899,4.076031,-0.736547,0.274986,-0.621380,1.467066,-0.830856,0.558985,-0.670527,0.770556,-1.382467,0.945780,-1.586208,-1.676506,2.454021,-0.444691,-0.262596,2.366920,-0.498411,0.255399,-0.403134,1.223619,-0.800054,0.219666,-0.271223,0.618320,-0.829414,0.217452,0.282403,-0.111470,0.033774,1.559741,-1.459486,0.357827,0.087973,0.393520,-1.297585,0.780270,-0.595803,0.745117,-3.611493,-0.397209,1.565174,-3.275650,-0.825888,2.876266,-2.024648,-4.424031,3.500003,0.278872,-1.033102,-0.434423,2.254847,0.295907,-1.045306,0.146904,2.173491,0.180543,-1.494152,1.054330,2.109722,-1.134351,0.049515,3.471132,-2.087607,-0.264439,0.106329,-0.188882,-0.498779,0.250192,-0.290969,-0.251210,-0.104137,0.168097,-0.372243,-0.194262,-0.000248,0.115215,-0.367541,-0.117643,-0.211367,0.147390,-0.386147,-0.522939,0.101516,0.296061,-0.713714,-0.481555,0.036514,-0.010210,-0.524763,-0.973220,0.897795,0.265601,-1.056594,-0.237539,0.689433,-0.302566,-0.759189,-0.026534,0.633677,-0.082823,-1.584219,0.623491,-0.565467,-2.110953,1.793530,-0.044292,-1.623222,2.308782,-2.855172,-2.911076,1.846965,-1.371997,-0.908216,-0.143536,0.150909,-0.661755,-1.664028,-0.989780,0.138325,-2.070546,-0.181160,-1.843256,0.888028,-1.236225,-0.363054,-2.701059,3.501575,-0.932726,-1.491264,-0.685439,5.292499,-2.993162,0.138359,5.718166,-2.691805,-4.288878,5.962191,0.773242,-3.049470,5.141354,-4.088171,-3.079956,0.577583,-2.668857,0.753252,-1.794314,0.989339,0.600804,-2.490293,-1.280102,0.997154,-2.627711,-0.214860,-0.934803,0.209747,-1.471144,-1.008072,-2.464930,2.018469,-2.184858,-0.778217,-1.487140,2.289150,-2.098328,-1.921896,-0.753056,1.731493,-4.195901,-1.102466,-2.152430,6.112190,-6.297380,2.588919,6.020185,-3.502277,-3.283145,0.087532,-0.726578,-2.124164,-6.677526,2.747555,-2.831923,-0.813968,-9.018423,10.068372,-4.332615,2.009155,-5.597107,21.925266,-1.095059,-4.237110,22.679613,-9.324185,-12.293709,7.477446,4.676602,-6.992707,-7.521158,9.465798,3.372561,-9.399754,-9.360486,24.574646,10.063135,-45.497612,16.520300,-3.633375,-53.699135,15.392792,-13.683658,36.334099,-23.695953,9.575275,37.125999,-14.312904,-35.893890,40.316307,-5.567097,29.360865,-11.378679,54.266922,53.054283,-40.492195,42.043587,-7.957281,-6.564029,-5.355693,0.067012,10.527348,12.702133,-25.527901,9.300870,2.504138,-10.679075,-10.506603,11.216032,-23.251738,-10.263245,-4.094793,-38.040531,30.847654,-7.827937,-0.074698,4.016102,-6.290090,0.078938,-13.793878,-50.513222,66.814392,-27.574677,34.554619,5.847007,63.873642,36.498199,-21.989090,50.012295,12.966932,22.522493,-72.947021,13.149655,58.984413,-77.620972,27.035706,96.744858,-49.687592,-21.622959,18.000164,6.249833,-3.000859,-14.832733,23.212025,21.194103,-9.677989,3.947681,4.343255,15.614146,-9.845819,-7.562133,10.977285,10.900018,-8.632803,-2.624102,8.090856,5.354807,-0.812278,-2.987872,6.903718,11.192393,-5.316907,-5.503243,11.366304,5.921198,0.752117,-0.033497,7.356454,11.785696,-4.476658,-1.255878,6.697177,7.825922,-3.389076,-1.857686,5.357016,4.806100,2.770468,-6.060267,10.993265,11.038116,-0.625593,-2.307517,10.941944,10.889416,-1.624761,-0.410736,9.873670,11.198769,-4.700813,-0.265393,10.173597,4.231651,6.630449,2.013509,4.981524,17.113003,-1.941150,-5.974856,12.589672,14.885628,1.416416,-4.339506,19.581970,29.506876,-21.914871,8.100063,5.529015,17.395313,-42.507214,-8.858236,28.340401,-37.571083,24.924023,16.456043,9.890907,14.637844,0.420228,11.175602,4.657798,9.493495,5.184422,3.157505,10.650087,30.163883,-37.497597,8.803420,1.809659,-27.950119,17.821640,0.378348,-0.897831,3.438645,18.442125,-12.501354,-8.625740,22.630566,2.999943,-81.775620,120.936020,20.613983,-2.954912,46.903152,53.681847,8.521618,25.132580,27.274986,96.425171,55.702156,-26.030451,124.628090,-5.305655,5.751141,61.327446,73.073288,26.262129,188.133224,-217.617599,167.614136,-153.388000,-100.120453,-30.736549,-20.592270,-45.235802,-52.501831,7.180828,-3.171291,-23.732357,-5.906143,-13.579466,18.316414,-46.552071,-7.301130,-20.747360,-13.337324,-17.593395,-21.554935,-3.496951,-1.483884,-14.482822,-11.252750,-3.390569,5.513385,-20.616596,-8.156286,-2.480740,-0.540428,-16.155827,-4.846705,-3.841211,-0.344046,-13.284502,-4.592407,-3.186466,2.208670,-14.397432,-3.794336,-1.446874,1.779283,-14.367510,0.495028,-5.859029,1.831706,-15.768873,-2.611437,-4.050808,-1.213884,-12.709902,-2.605905,-1.576109,0.819760,-14.908223,1.159069,-4.019318,-2.835606,-10.625299,1.415964,-6.248509};
//static float s_real_ifft_out[512] = {764.018372,-1187.634888,1505.363037,-897.143921,180.158173,-760.027527,-442.016296,592.000183,-1880.609985,641.324219,-815.577698,-331.787201,883.949341,-777.445618,717.616821,-335.543304,817.464050,-473.516418,654.709412,-431.094879,-259.280701,67.886292,-225.757141,45.764481,-1335.930176,1497.507324,-1313.299927,211.504913,513.210632,-818.640625,408.349243,-203.151871,1547.539795,-1266.447876,1623.921753,134.176819,-264.602783,375.211029,248.936722,187.727905,-1329.025391,1311.308105,-1068.008301,222.437469,-540.338135,56.595840,-544.017212,-546.054382,801.806152,-1079.666016,713.403198,-360.770325,312.331970,-783.287354,601.205139,-172.800720,-910.384399,1350.910278,-526.315063,1494.367798,-591.864136,1468.230225,801.395142,-424.089539,1490.803955,-344.301514,541.610107,-659.494751,827.262695,-338.056274,-1439.739380,314.661163,-515.416748,-1080.911377,-522.400940,198.921432,-1209.232422,156.072388,289.035706,-483.210754,980.913086,-461.043762,279.826294,426.764832,96.323631,217.986038,-696.039856,1707.365845,-1765.956055,632.249023,957.437378,-1847.754272,541.195679,-401.235016,330.780457,-1427.362793,1146.280396,310.060974,-1004.977356,1536.066162,200.858704,-217.777618,-736.085083,1705.185303,-904.204651,-481.179993,944.382202,-416.468201,69.453125,-361.869904,821.117065,-1478.485352,-89.463745,305.271545,-993.097229,205.055237,-109.710632,-355.788574,234.068512,961.562073,-357.890411,106.179077,522.251587,477.164917,-88.173706,-260.320190,1462.788208,-900.140503,510.037903,494.789307,181.162292,-508.056427,194.916382,361.147583,-273.010803,-700.496704,791.336304,56.059937,-915.495850,1318.742432,-661.511169,45.302002,-334.297577,-236.936890,-498.985352,-976.133179,1050.515869,-2225.362305,522.734375,489.620697,-697.783081,1.718338,143.354401,984.109985,-1337.150146,1761.604248,311.032349,-509.420074,920.382446,636.648010,72.943710,-1043.962646,1832.413086,-789.467224,-1293.417725,1139.556030,-929.548218,-539.846680,-640.681335,967.732483,-1692.087402,106.134491,1067.942017,-1391.012085,1087.950439,132.021133,-369.101501,640.872437,661.277588,-356.944519,7.313965,669.691895,-216.043747,-815.122314,1040.913330,139.068802,-1550.726929,972.230713,498.488525,-1156.412842,-140.685486,648.043823,356.247864,-893.474670,1010.289795,502.933289,-361.384644,671.287964,764.667114,-469.522705,-70.187775,147.340591,-35.484573,22.274963,-906.038452,142.497162,-7.558807,-853.762756,-82.173218,-1085.725830,528.821655,-1141.894409,34.155518,440.210266,-592.013672,926.921997,-235.651825,895.286743,-320.856079,-47.659393,1231.807129,-994.771667,466.630005,-609.558777,1108.255859,-1019.836975,-228.031128,1346.294067,-1418.485107,314.180573,199.560638,-336.096832,-483.851471,166.876114,1088.017578,-2021.419678,656.720886,506.578339,-888.410522,-358.917786,528.950806,-534.207825,-436.832306,1053.142944,672.814209,-971.411133,1524.638184,882.848389,-114.985596,610.354187,917.770142,-528.052490,-295.846497,825.982178,-1278.344727,57.655518,-966.612854,-132.512207,-922.527283,-66.518219,184.028595,-1284.797363,2353.335693,-756.197083,669.867065,362.687164,729.839905,-138.989716,-46.781982,1902.052246,-1864.420532,863.932373,191.408142,-109.327148,-765.508728,-594.191040,463.363403,-1859.015625,785.988525,-473.319885,91.218384,53.912354,422.942505,1076.797607,-641.055725,1181.606812,-237.204224,427.945129,-408.328918,-395.279663,307.505005,-1005.929016,-304.245117,-474.033112,-155.845901,-635.522034,-298.601379,274.392639,-734.405884,463.843292,134.166595,314.175537,-215.816193,384.069397,512.987793,-227.306091,-83.374146,424.692017,83.534256,-104.931915,161.158508,967.701355,76.357880,-751.140991,1610.519409,176.645386,-272.566589,229.519714,390.125458,-309.018494,-994.937256,879.037109,-1111.924072,-1684.111694,819.100708,-770.743774,-627.654419,173.609589,4.097534,271.049316,-65.458435,549.255676,52.980164,-482.656494,1313.904541,-368.564026,227.983368,266.319824,33.164154,-164.308838,-84.823143,-319.359497,-1161.159180,310.063110,-522.250427,239.895569,-595.165039,929.055786,267.981293,96.821259,1475.767578,-910.787842,1112.640991,-638.132263,425.686462,-284.776611,-1086.097412,583.019043,-1002.795776,-187.524109,-1043.731689,250.794312,-1175.021851,-84.753845,445.725098,-1035.441895,1090.397461,-203.880676,723.581299,-686.464294,933.636414,47.973511,-990.128967,1633.572754,-757.447388,570.320984,128.651093,1382.075562,-9.441010,-638.785034,2418.035156,-1227.001587,1095.445923,-242.090210,-46.164108,186.034058,-1109.809082,1252.602539,-2594.021973,519.524475,-1081.048828,-549.054199,293.421234,-1155.502197,624.019409,-568.416870,1505.981201,-1137.203247,772.890503,674.434631,-44.873657,437.282196,-216.459503,1044.038574,-1268.984253,1006.188110,-1149.940796,-265.761353,-219.020172,-840.944092,570.991638,-1323.416016,1031.753906,-215.296600,1139.163208,437.710144,-25.310287,1470.832764,-566.676270,436.256165,35.850037,-154.561371,-587.487427,-253.068192,239.226440,-1580.434570,210.330261,-875.388428,-719.140869,29.176025,-347.894958,344.081482,-522.393921,1397.508423,-356.124573,5.825226,823.355957,-617.572632,411.126038,-320.148651,1134.358887,-62.593216,-195.847778,1826.907471,98.789368,-447.197632,1492.663818,80.741241,-505.081055,20.850403,754.125977,-652.046448,-940.332764,462.177856,-560.578003,-1112.166260,-261.380951,-126.423355,-454.697327,-757.766907,400.745605,720.767456,-623.110596,385.255432,1178.948608,-227.545624,763.316284,-824.569885,1160.596436,-137.733170,-1095.249756,840.874878,-734.863892,-161.742706,-825.333374,993.963989,-849.875977,-902.276184,1673.025513,-148.024063,-7.244019,312.997742,1483.350952,-830.537964,163.344177,782.111938,-595.295410,-617.186890,114.714386,111.046432,-1548.018311,262.400940,-681.723206,-338.508209,-763.091064,265.539246,384.218140,-671.559998,660.845947,464.453491,-14.458649,-75.756836,517.044617,-398.829590,435.835144,293.782288,335.066254,427.487976,137.483337,1500.128662,-453.495422,735.950562};

// 计算输出
/*
(-0.821172,0.000000),(3.983183,0.274325),(-1.725619,-0.704614),(4.567614,-0.899197),(-1.370726,-0.798818),(4.832833,-1.730978),(-0.736440,-0.819234),(3.798873,-3.138242),(3.169637,-4.660429),(8.804735,2.146360),(-1.737590,-2.816616),(10.258329,-0.572555),(-2.292701,-4.080986),(15.119956,-2.819602),(-3.536365,-11.211754),(56.383663,-12.992019),(15.381144,66.411613),(-29.306086,7.250103),(2.533560,8.482784),(-10.663581,4.181239),(0.625240,4.836741),(-6.263019,2.987000),(0.016013,3.773731),(-4.905441,2.996394),(-1.909018,2.565160),(-3.708694,0.695010),(-1.129636,1.926352),(-2.572819,0.117502),(-0.653354,2.516363),(-3.198097,0.140667),(-1.767242,2.270615),(-5.311087,-3.910400),(5.311897,-2.640915),(-0.088902,4.076029),(-0.736551,0.274963),(-0.621372,1.467052),(-0.830856,0.558984),(-0.670521,0.770551),(-1.382465,0.945776),(-1.586208,-1.676513),(2.454023,-0.444691),(-0.262599,2.366917),(-0.498411,0.255404),(-0.403133,1.223615),(-0.800054,0.219666),(-0.271223,0.618319),(-0.829416,0.217449),(0.282404,-0.111472),(0.033774,1.559741),(-1.459483,0.357821),(0.087979,0.393515),(-1.297584,0.780267),(-0.595802,0.745116),(-3.611492,-0.397207),(1.565172,-3.275648),(-0.825887,2.876266),(-2.024650,-4.424030),(3.500004,0.278871),(-1.033103,-0.434422),(2.254846,0.295906),(-1.045305,0.146904),(2.173490,0.180542),(-1.494150,1.054329),(2.109725,-1.134350),(0.049515,3.471132),(-2.087607,-0.264441),(0.106335,-0.188887),(-0.498779,0.250185),(-0.290969,-0.251210),(-0.104139,0.168097),(-0.372241,-0.194261),(-0.000245,0.115215),(-0.367538,-0.117648),(-0.211366,0.147390),(-0.386147,-0.522937),(0.101514,0.296063),(-0.713715,-0.481556),(0.036520,-0.010208),(-0.524766,-0.973224),(0.897800,0.265603),(-1.056594,-0.237539),(0.689433,-0.302570),(-0.759188,-0.026537),(0.633680,-0.082819),(-1.584221,0.623492),(-0.565465,-2.110954),(1.793530,-0.044292),(-1.623222,2.308781),(-2.855170,-2.911076),(1.846957,-1.372000),(-0.908218,-0.143536),(0.150906,-0.661758),(-1.664028,-0.989777),(0.138317,-2.070542),(-0.181166,-1.843262),(0.888020,-1.236221),(-0.363054,-2.701065),(3.501572,-0.932727),(-1.491249,-0.685438),(5.292508,-2.993147),(0.138359,5.718169),(-2.691807,-4.288871),(5.962191,0.773241),(-3.049471,5.141354),(-4.088176,-3.079959),(0.577585,-2.668856),(0.753252,-1.794315),(0.989341,0.600807),(-2.490294,-1.280103),(0.997156,-2.627711),(-0.214859,-0.934805),(0.209749,-1.471148),(-1.008070,-2.464933),(2.018471,-2.184858),(-0.778214,-1.487144),(2.289154,-2.098326),(-1.921900,-0.753056),(1.731493,-4.195907),(-1.102465,-2.152428),(6.112188,-6.297382),(2.588917,6.020187),(-3.502280,-3.283147),(0.087533,-0.726576),(-2.124161,-6.677525),(2.747555,-2.831922),(-0.813970,-9.018421),(10.068369,-4.332615),(2.009154,-5.597109),(21.925266,-1.095059),(-4.237104,22.679613),(-9.324183,-12.293711),(7.477450,4.676594),(-6.992709,-7.521157),(9.465800,3.372559),(-9.399752,-9.360482),(24.574646,10.063134),(-45.497608,16.520309),(-3.633381,-53.699131),(15.392792,-13.683662),(36.334091,-23.695961),(9.575279,37.125999),(-14.312912,-35.893883),(40.316311,-5.567101),(29.360865,-11.378679),(54.266922,53.054283),(-40.492188,42.043594),(-7.957283,-6.564025),(-5.355687,0.067009),(10.527349,12.702133),(-25.527908,9.300871),(2.504140,-10.679079),(-10.506601,11.216036),(-23.251736,-10.263244),(-4.094796,-38.040531),(30.847654,-7.827944),(-0.074697,4.016100),(-6.290090,0.078937),(-13.793883,-50.513222),(66.814407,-27.574682),(34.554619,5.847005),(63.873642,36.498196),(-21.989094,50.012299),(12.966936,22.522499),(-72.947021,13.149662),(58.984406,-77.620972),(27.035717,96.744850),(-49.687592,-21.622955),(18.000164,6.249832),(-3.000859,-14.832729),(23.212029,21.194105),(-9.677990,3.947681),(4.343254,15.614141),(-9.845819,-7.562133),(10.977287,10.900017),(-8.632805,-2.624099),(8.090858,5.354804),(-0.812280,-2.987872),(6.903713,11.192392),(-5.316906,-5.503248),(11.366302,5.921196),(0.752117,-0.033498),(7.356457,11.785700),(-4.476658,-1.255878),(6.697180,7.825919),(-3.389077,-1.857683),(5.357018,4.806101),(2.770468,-6.060266),(10.993265,11.038115),(-0.625593,-2.307518),(10.941942,10.889416),(-1.624758,-0.410737),(9.873672,11.198769),(-4.700813,-0.265393),(10.173600,4.231648),(6.630455,2.013509),(4.981534,17.113007),(-1.941151,-5.974855),(12.589671,14.885632),(1.416413,-4.339503),(19.581972,29.506874),(-21.914871,8.100067),(5.529017,17.395309),(-42.507217,-8.858236),(28.340399,-37.571083),(24.924023,16.456041),(9.890909,14.637840),(0.420226,11.175598),(4.657801,9.493498),(5.184422,3.157505),(10.650088,30.163883),(-37.497589,8.803419),(1.809659,-27.950115),(17.821640,0.378348),(-0.897827,3.438647),(18.442129,-12.501357),(-8.625741,22.630569),(2.999934,-81.775620),(120.936035,20.613976),(-2.954909,46.903152),(53.681850,8.521619),(25.132580,27.274986),(96.425171,55.702148),(-26.030439,124.628098),(-5.305651,5.751143),(61.327446,73.073288),(26.262144,188.133209),(-217.617584,167.614151),(-153.388000,-100.120422),(-30.736546,-20.592268),(-45.235806,-52.501823),(7.180822,-3.171292),(-23.732357,-5.906145),(-13.579462,18.316414),(-46.552071,-7.301127),(-20.747360,-13.337322),(-17.593395,-21.554935),(-3.496951,-1.483883),(-14.482825,-11.252748),(-3.390567,5.513381),(-20.616590,-8.156282),(-2.480740,-0.540428),(-16.155834,-4.846702),(-3.841218,-0.344040),(-13.284507,-4.592409),(-3.186466,2.208669),(-14.397434,-3.794332),(-1.446872,1.779285),(-14.367508,0.495031),(-5.859033,1.831706),(-15.768878,-2.611438),(-4.050806,-1.213883),(-12.709902,-2.605905),(-1.576109,0.819760),(-14.908226,1.159065),(-4.019326,-2.835609),(-10.625301,1.415964),(-6.248509,0.000000)
740.056213,-1163.672607,1481.400757,-873.181702,156.195740,-736.065247,-465.978638,615.962402,-1904.572266,665.286621,-839.540039,-307.824890,859.987061,-753.483337,693.654541,-311.581146,793.501648,-449.554169,630.747192,-407.132813,-283.243042,91.848694,-249.719452,69.726746,-1359.892456,1521.469604,-1337.262085,235.467438,489.248230,-794.678223,384.386993,-179.189697,1523.577637,-1242.485596,1599.959473,158.138855,-288.565033,399.173370,224.974258,211.690277,-1352.987549,1335.270508,-1091.970703,246.399994,-564.300354,80.558105,-567.979431,-522.092041,777.843933,-1055.703857,689.440918,-336.808075,288.369629,-759.325195,577.242676,-148.838440,-934.346436,1374.872559,-550.277161,1518.330078,-615.826233,1492.192627,777.433044,-400.127197,1466.841797,-320.339111,517.647705,-635.532471,803.300293,-314.094147,-1463.701660,338.623749,-539.379089,-1056.949219,-546.363098,222.883759,-1233.194702,180.034760,265.073547,-459.248627,956.950928,-437.081421,255.864029,450.726929,72.361282,241.948364,-720.001953,1731.328369,-1789.918335,656.211609,933.474915,-1823.791870,517.233398,-377.272888,306.818115,-1403.400513,1122.317993,334.023132,-1028.939575,1560.028564,176.896240,-193.815384,-760.047058,1729.147705,-928.166870,-457.217712,920.419861,-392.506073,45.490860,-337.907562,797.154663,-1454.522949,-113.425934,329.233826,-1017.059570,229.017578,-133.673065,-331.826538,210.106201,985.524109,-381.852661,130.141541,498.289307,501.127136,-112.135986,-236.357819,1438.825684,-876.178528,486.075531,518.751648,157.199982,-484.094177,170.953979,385.109741,-296.972961,-676.534424,767.374023,80.021973,-939.458008,1342.704834,-685.473511,69.264465,-358.259949,-212.974564,-522.947510,-952.170837,1026.553223,-2201.399902,498.772217,513.583008,-721.745483,25.680458,119.391998,1008.072144,-1361.112183,1785.566650,287.070038,-485.457886,896.420166,660.610352,48.981445,-1020.000488,1808.450562,-765.505127,-1317.380127,1163.518555,-953.510437,-515.884277,-664.643738,991.694824,-1716.049805,130.097076,1043.979736,-1367.049927,1063.988403,155.983215,-393.063751,664.834595,637.315247,-332.982300,-16.648254,693.654419,-240.006195,-791.159912,1016.950867,163.030884,-1574.689087,996.192993,474.526154,-1132.450684,-164.647705,672.006104,332.285706,-869.512451,986.327515,526.895569,-385.346924,695.250305,740.704773,-445.560394,-94.150208,171.302872,-59.446747,46.237091,-930.000671,166.459381,-31.521179,-829.800537,-106.135559,-1061.763184,504.859375,-1117.932129,10.193237,464.172516,-615.975891,950.884277,-259.614136,919.248779,-344.818359,-23.697266,1207.844727,-970.809509,442.667480,-585.596436,1084.293579,-995.874756,-251.993164,1370.256348,-1442.447510,338.143158,175.598297,-312.134644,-507.813690,190.838470,1064.055176,-1997.457397,632.758789,530.540527,-912.373047,-334.955322,504.988617,-510.245667,-460.794525,1077.105347,648.851929,-947.448853,1500.676025,906.810608,-138.947739,634.316467,893.807739,-504.090393,-319.808746,849.944824,-1302.307129,81.618256,-990.575134,-108.549805,-946.489624,-42.555847,160.066223,-1260.835205,2329.373535,-732.234741,645.904724,386.649414,705.877808,-115.027542,-70.744202,1926.014404,-1888.382813,887.894897,167.445862,-85.364716,-789.471069,-570.228516,439.401123,-1835.053467,762.026123,-449.357849,67.256104,77.874634,398.980377,1100.759888,-665.017761,1205.569336,-261.166473,451.907532,-432.291321,-371.317444,283.542664,-981.966736,-328.207367,-450.070892,-179.808243,-611.559570,-322.563660,298.354797,-758.368042,487.805573,110.204330,338.137878,-239.778259,408.031799,489.025452,-203.343933,-107.336426,448.654327,59.571945,-80.969482,137.196136,991.663635,52.395569,-727.178711,1586.557129,200.607544,-296.528748,253.481995,366.163391,-285.056335,-1018.899475,902.999390,-1135.886597,-1660.149414,795.138306,-746.781738,-651.616699,197.571564,-19.864685,295.011566,-89.420654,573.217896,29.017822,-458.694244,1289.942139,-344.601776,204.021118,290.282104,9.201767,-140.346436,-108.785416,-295.397217,-1185.121582,334.025452,-546.212524,263.857727,-619.127258,953.018188,244.019287,120.783508,1451.805176,-886.825562,1088.678589,-614.169922,401.724213,-260.814636,-1110.059570,606.981384,-1026.758179,-163.561768,-1067.693970,274.756531,-1198.984131,-60.791351,421.762756,-1011.479614,1066.435181,-179.918518,699.619019,-662.501953,909.674072,71.935486,-1014.091064,1657.535278,-781.409485,594.283508,104.688812,1406.037598,-33.403625,-614.822449,2394.072754,-1203.039917,1071.483643,-218.127991,-70.126251,209.996216,-1133.771362,1276.564941,-2617.984375,543.486877,-1105.011230,-525.092041,269.458832,-1131.540039,600.057129,-544.454651,1482.018921,-1113.241211,748.928284,698.396851,-68.835907,461.244446,-240.421570,1068.000854,-1292.946655,1030.150635,-1173.903198,-241.799103,-242.982330,-816.981689,547.029175,-1299.453613,1007.791626,-191.334595,1115.201172,461.672363,-49.272583,1494.795166,-590.638306,460.218628,11.887634,-130.599121,-611.449768,-229.105759,215.264160,-1556.472168,186.367615,-851.426270,-743.103271,53.138306,-371.857300,368.043762,-546.356201,1421.470825,-380.086731,29.787674,799.393616,-593.610718,387.163727,-296.186432,1110.396484,-38.631165,-219.810059,1850.869995,74.826996,-423.235046,1468.701660,104.703308,-529.043518,44.812866,730.163696,-628.084290,-964.295044,486.140442,-584.540344,-1088.203979,-285.343201,-102.461197,-478.659637,-733.804688,376.783264,744.729736,-647.072937,409.217804,1154.986328,-203.583435,739.354004,-800.607483,1136.634155,-113.771088,-1119.211914,864.837402,-758.826294,-137.780518,-849.295410,1017.926392,-873.838562,-878.313660,1649.063232,-124.061859,-31.206299,336.959961,1459.388428,-806.575928,139.382019,806.074097,-619.257935,-593.224487,90.751984,135.008789,-1571.980469,286.363159,-705.685547,-314.545837,-787.053467,289.501587,360.255768,-647.597717,636.883667,488.415680,-38.420990,-51.794525,493.082275,-374.867493,411.872681,317.744507,311.103882,451.450317,113.521393,1524.090820,-477.457825,759.913086
*/

void kiss_fft_test_cpx(int nfft, int cnt)
{
    kiss_fft_cpx* cx_in =  (kiss_fft_cpx*)KISS_FFT_MALLOC(nfft * sizeof(kiss_fft_cpx));
    kiss_fft_cpx* cx_out = (kiss_fft_cpx*)KISS_FFT_MALLOC(nfft * sizeof(kiss_fft_cpx));

    kiss_fft_cfg fft_cfg = kiss_fft_alloc( nfft , 0 , 0, 0);

    // put kth sample in cx_in[k].r and cx_in[k].i
    /* 输入数据 */
    for(int i=0; i<nfft; i++)
    {
      cx_in[i].r = 1+2*sinf(2.0f*3.141592653f*i/nfft);
      cx_in[i].i = 0;
    }
    /* 打印输入 */
    xprintf("[in]\r\n");
    for(int i=0; i<nfft; i++)
    {
        xprintf("(%f,%f),",cx_in[i].r,cx_in[i].i);
    }
    xprintf("\r\n");
		
		uint32_t t0;
		uint32_t t1;
		t0 = get_tm();
		for(int i=0; i<cnt; i++){
			kiss_fft( fft_cfg , cx_in , cx_out );
		}
		t1 = get_tm();
		xprintf("used:%d\r\n",t1>t0?(t1-t0):(0xFFFFFFFF-t0+t1));
		
    // transformed. DC is in cx_out[0].r and cx_out[0].i  
    /* 打印输出 */
    xprintf("[FFT]\r\n"); 
    for(int i=0; i<nfft; i++)
    {
        xprintf("(%f,%f),",cx_out[i].r,cx_out[i].i);
    }
    xprintf("\r\n");
    kiss_fft_free(fft_cfg);


    kiss_fft_cfg ifft_cfg = kiss_fft_alloc( nfft , 1 , 0, 0);
		
		t0 = get_tm();
		for(int i=0; i<cnt; i++){
			kiss_fft( ifft_cfg , cx_out , cx_in );
		}
		t1 = get_tm();
		xprintf("used:%d\r\n",t1>t0?(t1-t0):(0xFFFFFFFF-t0+t1));
		
    /* 打印输出 */
    xprintf("[IFFT]\r\n");
    for(int i=0; i<nfft; i++)
    {
        xprintf("(%f,%f),",cx_in[i].r/nfft,cx_in[i].i/nfft);
    }
    xprintf("\r\n");
    kiss_fft_free(ifft_cfg);

    KISS_FFT_FREE(cx_in);
    KISS_FFT_FREE(cx_out);
}

void kiss_fft_test_real(int nfft, int cnt)
{
    kiss_fftr_cfg fftr_st;
    kiss_fft_scalar * rbuf;
    kiss_fft_cpx * cbuf;

    rbuf = (kiss_fft_scalar*)KISS_FFT_MALLOC(sizeof(kiss_fft_scalar) * (nfft));
    cbuf = (kiss_fft_cpx*)KISS_FFT_MALLOC(sizeof(kiss_fft_cpx) * (nfft/2+1));

    /* 输入数据 */
    for(int i=0; i<nfft; i++)
    {
        rbuf[i] = 1+2*sinf(2.0f*3.141592653f*i/nfft);
    }

    /* 打印输入 */
    xprintf("[KISS IN]\r\n");
    for(int i=0; i<nfft; i++)
    {
      xprintf("%f,",rbuf[i]);
    }
    xprintf("\r\n");

    fftr_st = kiss_fftr_alloc( nfft ,0 ,0,0);
		
		uint32_t t0;
		uint32_t t1;
		t0 = get_tm();
		for(int i=0;i<cnt;i++){
			kiss_fftr( fftr_st , rbuf ,cbuf);
		}
		t1 = get_tm();
		xprintf("used:%d\r\n",t1>t0?(t1-t0):(0xFFFFFFFF-t0+t1));
		
    /* 打印输出 */
    xprintf("[KISS FFTR]\r\n"); 
    for(int i=0; i<(nfft/2+1); i++)
    {
        xprintf("(%f,%f),",cbuf[i].r,cbuf[i].i);
    }
    xprintf("\r\n");
    kiss_fftr_free(fftr_st);

    kiss_fftr_cfg fftri_st = kiss_fftr_alloc( nfft ,1 ,0,0);

		t0 = get_tm();
		for(int i=0; i<cnt; i++){
			kiss_fftri( fftri_st , cbuf ,rbuf);
		}
		t1 = get_tm();
		xprintf("used:%d\r\n",t1>t0?(t1-t0):(0xFFFFFFFF-t0+t1));
		
    /* 打印输出 */
    xprintf("[KISS FFTRI]\r\n"); 
    for(int i=0; i<nfft; i++)
    {
        xprintf("%f,",rbuf[i]);
    }
    xprintf("\r\n");
    kiss_fftr_free(fftri_st);

    KISS_FFT_FREE(rbuf);
    KISS_FFT_FREE(cbuf);
}